<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta Data -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FocusR - HR</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <link rel="shortcut icon" href="./img/assets/favicon.png" type="image/x-icon">

    <!-- Stlylesheet -->
    <link
      rel="stylesheet"
      href="bootstrap/css/bootstrap.min.css"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="css/font-awesome/css/font-awesome.css"
      type="text/css"
    />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link
      rel="stylesheet"
      href="css/no-ui-slider/jquery.nouislider.css"
      type="text/css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/css.gg/icons/all.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/colors/green.css" id="color-skins" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <style>
        *{
            font-family: "Exo", sans-serif;
        }
        li {
            list-style: none;
            font-family: "Exo", sans-serif;
	        color: #1c1c1c;
        }
        .over-all-title{
            color: #1c1c1c;
            font-weight: 900;
        }
        /* .edit-btn{
            padding: 0.5rem 2rem;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            display: flex;
            background-color: rgb(65, 238, 180);
            color: #ffff;
            font-weight: 600;
            font-family: "Exo", sans-serif;
        }
        .delete-btn{
            padding: 0.5rem 2rem;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            background-color: rgb(218, 83, 83);
            color: #ffff;
            font-weight: 600;
            font-family: "Exo", sans-serif;
        } */
        .list-item{
            display: grid;
            grid-template-columns: auto auto;
            border: 1px solid rgb(182, 188, 225);
            width: fit-content;
            padding: 1rem 0rem 1rem 1rem;
            border-radius: 16px;
            margin-bottom: 2%;
            width: 100%;
        }

        #submit-btn{
            padding: 0.5rem 2rem;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            background-color: rgb(53, 180, 102);
            color: #ffff;
            font-weight: 600;
            display: none;
            font-family: "Exo", sans-serif;
        }
        #reset-btn{
            padding: 0.5rem 2rem;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            background-color: rgb(116, 33, 33);
            color: #ffff;
            font-weight: 600;
            display: none;
            font-family: "Exo", sans-serif;
        }
        .api-btn-holder{
            display: flex;
            width: 100%;
            justify-content: space-around;
        }

/* 
own contact customize */

    </style>
  </head>
  <body>
    <!-- Start Preloader -->

    <div id="loader">
      <div class="spinner">
        <div class="cube cube0"></div>
        <div class="cube cube1"></div>
        <div class="cube cube2"></div>
        <div class="cube cube3"></div>
        <div class="cube cube4"></div>
        <div class="cube cube5"></div>
        <div class="cube cube6"></div>
        <div class="cube cube7"></div>
        <div class="cube cube8"></div>
        <div class="cube cube9"></div>
        <div class="cube cube10"></div>
        <div class="cube cube11"></div>
        <div class="cube cube12"></div>
        <div class="cube cube13"></div>
        <div class="cube cube14"></div>
        <div class="cube cube15"></div>
      </div>
    </div>
    <!-- End Preloader -->

    <!-- Start Header -->
    <header>
      <nav class="navbar navbar-default navbar-alt" role="navigation">
        <div class="container">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle"
              data-toggle="collapse"
              data-target="#main-nav"
            >
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand to-top" rel="home" href="#">
              <img
                src="img/assets/logo-dark.png"
                alt="Visual"
                class="logo-big"
              />
              <img
                src="img/assets/logo-dark.png"
                alt="Visual"
                class="logo-small"
              />
            </a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="main-nav">
            <ul class="nav navbar-nav navbar-right">
              <li>
                <a  href="index.html"> Home </a>
              </li>
              <li class="to-section">
                <a href="careers.html"> Careers </a>
              </li>
              <li class="to-section">
                <a href="index.html#contact"> Contact </a>
              </li>
              <li class="to-section">
                <a href="https://mypayroll.paysquare.com/" title="HR Login"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe-central-south-asia" viewBox="0 0 16 16">
 <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM4.882 1.731a.482.482 0 0 0 .14.291.487.487 0 0 1-.126.78l-.291.146a.721.721 0 0 0-.188.135l-.48.48a1 1 0 0 1-1.023.242l-.02-.007a.996.996 0 0 0-.462-.04 7.03 7.03 0 0 1 2.45-2.027Zm-3 9.674.86-.216a1 1 0 0 0 .758-.97v-.184a1 1 0 0 1 .445-.832l.04-.026a1 1 0 0 0 .152-1.54L3.121 6.621a.414.414 0 0 1 .542-.624l1.09.818a.5.5 0 0 0 .523.047.5.5 0 0 1 .724.447v.455a.78.78 0 0 0 .131.433l.795 1.192a1 1 0 0 1 .116.238l.73 2.19a1 1 0 0 0 .949.683h.058a1 1 0 0 0 .949-.684l.73-2.189a1 1 0 0 1 .116-.238l.791-1.187A.454.454 0 0 1 11.743 8c.16 0 .306.084.392.218.557.875 1.63 2.282 2.365 2.282a.61.61 0 0 0 .04-.001 7.003 7.003 0 0 1-12.658.905Z"/>
</svg></a>
             </li>
             <li class="to-section">
               <a href="https://email18.godaddy.com/webmail.php" title=" E mail"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                 <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>
               </svg></a>
             </li>
             <li class="to-section">
               <a href="https://techstephub.focusrtech.com:3030/techstep/" title="timesheet">
                 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
                   <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
                   <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                 </svg>
               </a>
             </li>

            </ul>
          </div>
          <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
      </nav>
    </header>





    <section id="contact" class="manage-contact-form">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center" style="margin-top: 7%;">
            <h3 class="section-title wow fadeInUp">Login to create opporunities</h3>
            <p class="subheading wow fadeInUp">Let's Do Magic.</p>
          </div>
          <div class="col-md-12 col-sm-12 wow fadeInUp">
            <div id="message"></div>
            <div name="dummyform1" id="dummyform1">
            <fieldset>
              <input 
               type="text" 
               id="username" 
               placeholder="username"
                />
              <input
                type="password"
                id="password"
                placeholder="password"
              />
            </fieldset>
            </div>
          </div>
            <div class="col-md-12 col-sm-12 wow fadeInUp">
                <button class="btn btn-primary" id="loginBtn" >login</button>
            </div>
        </div>
      </div>
    </section>


      <section id="contact" style="margin-top: 7%;" class="manage-contact">
        <div class="container">
          <div class="row">
            <div class="col-md-12 text-center">
              <h3 class="section-title wow fadeInUp">Dynamic Job Management Hub</h3>
              <p class="subheading wow fadeInUp">Empowering HR to Seamlessly Manage Job Listings and Optimize Talent Acquisition</p>
            </div>
            <div class="col-md-12 wow fadeInUp">
              <div id="message"></div>
              <div name="contactform" id="contactform">
              <fieldset>
                <input 
                 type="text" 
                 id="jobTitle" 
                 placeholder="Job Title"
                  />
                <input
                  type="text"
                  id="jobDesc"
                  placeholder="Job Description"
                />
                <input
                  type="text"
                  id="expReq"
                  placeholder="Experience Required"
                />
              </fieldset>
              <fieldset>
                <textarea
                  cols="20"
                  rows="3"
                  id="skills"
                  placeholder="Skills"
                ></textarea>
              </fieldset>
              <button class="btn btn-primary" onclick="createTask()" style="margin-top: 1%; margin-left: 1%;">
                Create job
              </button>
            </div>
            </div>
            <div class="col-md-12 wow fadeInLeft" id="tasklist-id">
                <br><br><br><br>
                <ul id="taskList"></ul>
                <ul id="taskList2"></ul>
                <div class="api-btn-holder">
                    <button  id="submit-btn" onclick="sendDataToBackend()">
                        Submit
                    </button>
                    <button  id="reset-btn" onclick="resetData()">
                        Reset
                    </button>
                </div>
            </div>
          </div>
        </div>
      </section>
            <center>
              <h2 class="section-title wow fadeInUp">Our Entities</h2>
              <p class="subheading wow fadeInUp">We landed our footprints around the globe</p>
            </center>
            <br>
            <br>
            <img src="img/assets/focusr.png" width="100%" alt="">
          <footer id="footer">
            <div class="footer-copyright">
              <div class="container">
                <div class="row">
                  <div class="col-md-12 text-center" style="margin-top: 5rem;">
                   <img src="img/assets/favicon.png" width="50px" alt="official-logo">
                    <p class="wow fadeInUp">
                      <div id="bouncyCircle"></div>
                      All Rights Reserved. Copyright © 2023
                      <a href="https://www.focusrtech.com" target="_blank"
                        >FocusR Consultancy and Technology Pvt Ltd</a
                      >
                    </p>
                    <ul class="social-icons subheading">
                      <li>
                        <a href="https://www.twitter.com/Focusrtech">
                          <i class="icon ion-social-twitter"></i>
                        </a>
                      </li>
                      <li>
                        <a href="https://www.facebook.com/focusrtechnologies">
                          <i class="icon ion-social-facebook"></i>
                        </a>
                      </li>
                      <li>
                        <a href="https://www.linkedin.com/company/focusr-consultancy-and-technologies-pvt-ltd">
                          <i class="icon ion-social-linkedin"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </footer>
      <a id="back-to-top">
        <i class="icon ion-chevron-up"></i>
      </a>

    </div>
<script>


$(document).ready(() =>{
  $(".manage-contact").hide()
  $("#loginBtn").click(() => {
    if($("#username").val() == "Hradmin" && $("#password").val() == "welcome"){
      $(".manage-contact").show()
      $(".manage-contact-form").hide()
    } else if($("#username").val() == "" || $("#password").val() == ""){
      alert("Please Enter Values")
    }else{
      alert("Wrong Credentials")
    }
  })
})
       let apiTasks = [];
    let manualTasks = [];
    let nextManualTaskId = 1;

    async function fetchDataFromBackend() {
          try {
            $.ajax({
              url: "https://secure.focusrtech.com:5050/FocusRService/api/auth/signin",
              type: "POST",
              data: JSON.stringify({
                email: "admin@gmail.com",
                password: "FocusR@123",
              }),
              dataType: "json",
              contentType: "application/json; charset=utf-8",
              success: function (data, status) {
                console.log("Data from Form", data);
                console.log("Status", status);

                return $.ajax({
                  url: "https://secure.focusrtech.com:5050/FocusRService/api/Job/Service/getListofAllJobRequirement",
                  type: "GET",
                  dataType: "json",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: "Bearer " + data.accessToken,
                  },
                  contentType: "application/json; charset=utf-8",
                  success: function (data, status) {
                    console.log("Data from get job", data);
                    console.log("Status", status);
                    apiTasks = data; // Assuming the API response is an array of tasks
                    displayTasks();
                  },
                });
              },
            });
          } catch (error) {
            console.error("Error fetching data from the API:", error);
          }
        }
    // Call this function to fetch data from the API when the page loads
    fetchDataFromBackend();

    function createTask() {
      const taskInput = document.getElementById('jobTitle');
      const dueDateInput = document.getElementById('jobDesc');
      const priorityInput = document.getElementById('expReq');
      const descriptionInput = document.getElementById('skills');

      const taskText = taskInput.value.trim();
      const dueDate = dueDateInput.value;
      const priority = priorityInput.value;
      const description = descriptionInput.value.trim();

      if (taskText) {
        const newTask = {
          id: `manual_${nextManualTaskId}`,
          jobTitle: taskText,
          jobDescription: dueDate,
          experienceRequired: priority,
          skillsRequired: description,
        };

        manualTasks.push(newTask);
        nextManualTaskId++;
        taskInput.value = '';
        dueDateInput.value = '';
        priorityInput.value = '';
        descriptionInput.value = '';
        displayTasks();
      }
    }

    function updateApiTask(taskId, newTaskData) {
      const taskToUpdate = apiTasks.find((task) => task.id === taskId);
      if (taskToUpdate) {
        Object.assign(taskToUpdate, newTaskData);
        displayTasks();
      }
    }

    function deleteApiTask(taskId) {
      apiTasks = apiTasks.filter((task) => task.id !== taskId);
      console.log("API task id",taskId)
      ///delete api add here
      $.ajax({
            url:"https://secure.focusrtech.com:5050/FocusRService/api/auth/signin",
            type:"POST",
            data:JSON.stringify({email:"admin@gmail.com",password:"FocusR@123"}),
            dataType:"json",
            contentType:'application/json; charset=utf-8',
            success: function(data,status){
               console.log("Data from Form",data)
               console.log("Status",status)

             
                
                    $.ajax({
            url:`https://techstephub.focusrtech.com:5050/FocusRService/api/Job/Service/delJobReqDetail/${taskId}`,
            type:"DELETE",
            headers: {
                 "Content-Type": "application/json",
                  Authorization: "Bearer " + data.accessToken,
              },
            success: function(data,status){
               console.log("Data from Form",data)
               alert("Job Deleted Sucessfully")
               fetchDataFromBackend()
            }
          })
                
         
            }
          })
      displayTasks();
    }

    function updateManualTask(taskId, newTaskData) {
      const taskToUpdate = manualTasks.find((task) => task.id === taskId);
      if (taskToUpdate) {
        Object.assign(taskToUpdate, newTaskData);
        displayTasks();
      }
    }

    function deleteManualTask(taskId) {
      manualTasks = manualTasks.filter((task) => task.id !== taskId);
      displayTasks();
    }

    function displayTasks() {
      displayTaskList(apiTasks, 'taskList', true);
      displayTaskList(manualTasks, 'taskList2', false);
    }

    function displayTaskList(taskList, listId, isApiTask) {
      const taskListElement = document.getElementById(listId);
      taskListElement.innerHTML = '';

      taskList.forEach((task) => {
        const listItem = document.createElement('div');
        listItem.className = "list-item"
        const taskDetails = `
          <p><span class="over-all-title">Job Title</span>: ${task.jobTitle}</p>
          <p><span class="over-all-title">Job Description</span>: ${task.jobDescription}</p>
          <p><span class="over-all-title">Experience Required</span>: ${task.experienceRequired}</p>
          <p><span class="over-all-title">Skills</span>: ${task.skillsRequired}</p>
        `;
        listItem.innerHTML = taskDetails;
        const wrapperDiv = document.createElement('div');
        wrapperDiv.className = 'wrapperDiv';

        const editButton = document.createElement('button');
        editButton.innerText = 'Edit';
        editButton.className = 'btn btn-primary';
        editButton.onclick = function () {
          const newTaskData = {};

          newTaskData.jobTitle = prompt('Enter new task jobTitle:', task.jobTitle);
          newTaskData.jobDescription = prompt('Enter new due date:', task.jobDescription);
          newTaskData.experienceRequired = prompt('Enter new experienceRequired:', task.experienceRequired);
          newTaskData.skillsRequired = prompt('Enter new skillsRequired:', task.skillsRequired);

          if (newTaskData.jobTitle !== null && newTaskData.jobTitle.trim() !== '') {
            if (isApiTask) {
              // If the task is from the API, update the API data
              
              updateApiTask(task.id, newTaskData);
            } else {
              // If the task is manually added, update the manualTasks data
              updateManualTask(task.id, newTaskData);
            }
          }
        };
        wrapperDiv.appendChild(editButton);

        const deleteButton = document.createElement('button');
        deleteButton.innerText = 'Delete';
        deleteButton.className = 'btn btn-primary';
        deleteButton.onclick = function () {
          if (isApiTask) {
            // If the task is from the API, delete the task from the API data
            console.log("Task id",task.job_id)
            deleteApiTask(task.job_id);
            console.log("Task id 2",task.job_id)
          } else {
            // If the task is manually added, delete the task from the manualTasks data
            deleteManualTask(task.id);
          }
        };
        wrapperDiv.appendChild(deleteButton);
        listItem.appendChild(wrapperDiv);

        taskListElement.appendChild(listItem);
        console.log("Dummy",apiTasks.concat(manualTasks))
        $("#submit-btn").css("display","block")
      });
    }

    


    function sendDataToBackend() {
        const sendData = apiTasks.concat(manualTasks)
        console.log("sendData",sendData)
        $.ajax({
            url:"https://secure.focusrtech.com:5050/FocusRService/api/auth/signin",
            type:"POST",
            data:JSON.stringify({email:"admin@gmail.com",password:"FocusR@123"}),
            dataType:"json",
            contentType:'application/json; charset=utf-8',
            success: function(data,status){
               console.log("Data from Form",data)
               console.log("Status",status)

               sendData.map((x,i) => {
                return (
                    $.ajax({
            url:"https://secure.focusrtech.com:5050/FocusRService/api/Job/Service/JobRequirementDetails",
            type:"POST",
            data:JSON.stringify({
                jobTitle: x.jobTitle,
                jobDescription:  x.jobDescription,
                experienceRequired: x.experienceRequired,
                skillsRequired: [x.skillsRequired]
            }),
            dataType:"json",
            headers: {
                 "Content-Type": "application/json",
                  Authorization: "Bearer " + data.accessToken,
              },
            contentType:'application/json; charset=utf-8',
            success: function(data,status){
               console.log("Data from Form",data)
               alert("Job Created Sucessfully")
               console.log("Status",status)
            }
          })
                )
               })
            }
          })
    }
</script>

    <script type="text/javascript" src="js/plugins/jquery.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/plugins/moderniz.min.js"></script>
    <script
      type="text/javascript"
      src="js/plugins/smoothscroll.min.js"
    ></script>
    <script
      type="text/javascript"
      src="js/no-ui-slider/jquery.nouislider.all.min.js"
    ></script>
    <script type="text/javascript" src="js/plugins/revslider.min.js"></script>
    <script type="text/javascript" src="js/plugins/waypoints.min.js"></script>
    <script type="text/javascript" src="js/plugins/parallax.min.js"></script>
    <script type="text/javascript" src="js/plugins/easign1.3.min.js"></script>
    <script
      type="text/javascript"
      src="js/plugins/cubeportfolio.min.js"
    ></script>
    <script type="text/javascript" src="js/plugins/owlcarousel.min.js"></script>
    <script type="text/javascript" src="js/plugins/tweetie.min.js"></script>

    <script type="text/javascript" src="js/plugins/gmap3.min.js"></script>
    <script type="text/javascript" src="js/plugins/wow.min.js"></script>
    <script type="text/javascript" src="js/plugins/counterup.min.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script>
  </body>
</html>
